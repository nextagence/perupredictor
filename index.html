<!doctype html>
<html lang="es" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Generador de patrón de apuestas</title>
  <style>
    :root{--bg:#071427;--panel:#0f1724;--accent:#18a0fb;--muted:#9fb0c9;}
    html,body{margin:0;height:100%;background:#071427;color:#e6eef8;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;-webkit-font-smoothing:antialiased;}
    .wrap{min-height:100%;display:flex;justify-content:center;padding:16px;}
    .panel{width:100%;max-width:420px;background:#0f1724;border-radius:16px;padding:18px 16px 20px;box-shadow:0 10px 40px rgba(0,0,0,.7);}
    h1{margin:0;font-size:19px;color:var(--accent);}
    .subtitle{font-size:12px;color:var(--muted);margin-top:4px;line-height:1.5;}
    .controls{margin-top:16px;display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;}
    label{font-size:13px;font-weight:600;color:var(--muted);margin-bottom:4px;}
    input[type=number]{padding:11px 10px;border-radius:10px;background:var(--panel);border:1px solid rgba(255,255,255,.06);color:#e5e7eb;font-weight:600;width:140px;font-size:14px;}
    input:focus{outline:none;box-shadow:0 0 0 1px var(--accent);}
    .btn{padding:12px 16px;border:none;border-radius:12px;background:linear-gradient(180deg,var(--accent),#0b84d6);color:#042129;font-weight:700;cursor:pointer;font-size:15px;width:100%;}
    .btn:active{transform:translateY(1px);}
    .output{margin-top:18px;padding:14px 10px 6px;border-radius:14px;background:rgba(255,255,255,0.02);display:none;}
    .list{display:flex;flex-direction:column;gap:10px;}
    .item{padding:10px 12px;border-radius:12px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.05);display:flex;justify-content:space-between;align-items:center;}
    .label{font-size:15px;font-weight:800;color:#ffffff;}
    .meta{font-size:13px;color:#dbeafe;font-weight:700;background:rgba(24,160,251,0.12);border-radius:999px;padding:4px 10px;white-space:nowrap;}
    .footer{text-align:center;margin-top:10px;font-size:12px;color:var(--muted);}
    @media(max-width:600px){.wrap{padding:12px}.panel{padding:16px 14px 18px}h1{font-size:18px}.controls{flex-direction:column;align-items:stretch}input[type=number]{width:100%}.btn{width:100%;font-size:16px;padding:13px 16px}.item{padding:10px}.label{font-size:15px}.meta{font-size:13px}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="panel">
      <h1>Generador de patrón de apuestas</h1>
      <div class="subtitle">Importes de apuestas y número de giros aleatorios. Si la apuesta total es alta, solo se usa 1 giro.</div>
      <div class="controls">
        <div style="display:flex;flex-direction:column;width:100%;">
          <label for="budget">Presupuesto (PEN)</label>
          <input id="budget" type="number" value="15" min="1" />
        </div>
        <button id="gen" class="btn">Obtener estrategia</button>
      </div>
      <div id="output" class="output">
        <div id="list" class="list"></div>
        <div id="footer" class="footer"></div>
      </div>
    </div>
  </div>

  <script>
  function(){
    var CURRENCY = "PEN";
    var HIGH_BET_THRESHOLD = 10;
    var MIN_SPINS = 2;
    var MAX_SPINS = 7;
    var MIN_TOTAL_BET = 1;

    function randomUnique5(){
      var s = new Set();
      while(s.size < 5){
        s.add(Math.floor(Math.random()*100) + 10);
      }
      return Array.from(s);
    }

    function computePattern(budget){
      var minTotal = MIN_TOTAL_BET;
      if(minTotal * 5 > budget){
        minTotal = Math.max(1, Math.floor(budget / 5));
      }
      var baseMinSum = minTotal * 5;
      var remaining = Math.max(0, budget - baseMinSum);

      var raw = randomUnique5();
      var sumRaw = raw.reduce(function(a,b){return a+b;},0);
      var extra = raw.map(function(v){return remaining * v / sumRaw;});
      var extraRounded = extra.map(function(v){return Math.floor(v);});
      var diff = remaining - extraRounded.reduce(function(a,b){return a+b;},0);

      while(diff > 0){
        var i = Math.floor(Math.random()*5);
        extraRounded[i]++;
        diff--;
      }

      var totals = [];
      for(var j=0;j<5;j++){
        totals[j] = minTotal + extraRounded[j];
      }

      var used = new Set();
      for(var k=0;k<5;k++){
        while(used.has(totals[k])){
          totals[k]++;
        }
        used.add(totals[k]);
      }

      for(var n = totals.length - 1; n > 0; n--){
        var idx = Math.floor(Math.random()*(n+1));
        var tmp = totals[n];
        totals[n] = totals[idx];
        totals[idx] = tmp;
      }
      return totals;
    }

    function generateSpins(sum){
      if(sum > HIGH_BET_THRESHOLD) return 1;
      return Math.floor(Math.random() * (MAX_SPINS - MIN_SPINS + 1)) + MIN_SPINS;
    }

    function render(pattern, budget){
      var list = document.getElementById("list");
      var out = document.getElementById("output");
      var footer = document.getElementById("footer");
      list.innerHTML = "";
      for(var i=0;i<5;i++){
        var total = pattern[i];
        var spins = generateSpins(total);
        var div = document.createElement("div");
        div.className = "item";
        var label = document.createElement("div");
        label.className = "label";
        label.textContent = "Apuesta total: " + total + " " + CURRENCY;
        var meta = document.createElement("div");
        meta.className = "meta";
        meta.textContent = "Giros: " + spins;
        div.appendChild(label);
        div.appendChild(meta);
        list.appendChild(div);
      }
      var sumAll = pattern.reduce(function(a,b){return a+b;},0);
      footer.textContent = "Total: " + sumAll + " " + CURRENCY + " — Presupuesto: " + budget + " " + CURRENCY;
      out.style.display = "block";
    }

    document.getElementById("gen").addEventListener("click", function(){
      var budget = parseInt(document.getElementById("budget").value,10) || 0;
      if(budget <= 0){
        alert("Introduce un presupuesto válido.");
        return;
      }
      var pattern = computePattern(budget);
      render(pattern, budget);
    });
  }();
  <\script>
</body>
</html>
